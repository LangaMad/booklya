{% extends 'base.html' %}
{% load static %}
{% block content %}

        <!-- Start: Blog Section -->
        <div id="content" class="site-content">
            <div id="primary" class="content-area">
                <main id="main" class="site-main">
                    <div class="blog-main-list">
                        <div class="container">
                            <div class="row">
                                <div class="blog-page grid">
                                    <div class="clearfix"></div>
                <div class="fh5co_tags_all">
                <form method="get" action="{% url 'blog' %}">
                    <input type="text" name="query" id="query" placeholder="Search" required>
                    <button type="submit">Search</button>
                </form>
            </div>

                <div>

                                    <article>
                                        {% for post in posts %}
                                        <div class="grid-item blog-item">
                                            <div class="post-thumbnail">
                                                <div class="post-date-box">
                                                    <div class="post-date">
                                                        <a class="date" href="#.">{{ post.created_at|date:'d'}}</a>
                                                    </div>
                                                    <div class="post-date-month">
                                                        <a class="month" href="#.">{{ post.created_at|date:'M'}}</a>
                                                    </div>
                                                </div>
                                                <a href="blog-detail.html"><img alt="blog" src="{{ post.image.url }}" /></a>
                                            </div>
                                            <div class="post-detail">
                                                <header class="entry-header">
                                                    <div class="blog_meta_category">
                                                        <span class="arrow-right"></span>
                                                        <a href="#." rel="category tag">{{ post.category }}</a>,
                                                        <a href="#." rel="category tag">{{ post.tags  }}</a>
                                                    </div>
                                                    <h3 class="entry-title"><a href="blog-detail.html">{{ post.title }}</a></h3>
                                                    <div class="entry-meta">
                                                        <span><i class="fa fa-user"></i> <a href="#">{{ post.author }}</a></span>
                                                        <span><i class="fa fa-comment"></i> <a href="#">{{ post.post_comments.count }} comments</a></span>
                                                    </div>
                                                </header>
                                                <div class="entry-content">
                                                    <p>{{post.text|slice:':100'}}</p>
                                                </div>
                                                <footer class="entry-footer">
                                                    <a class="btn btn-default" href="{%url 'blog_detail' post.id %}">Read More</a>
                                                </footer>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </article>
                                </div>
{% if is_paginated %}
        <div class="row mx-0">
            <div class="col-12 text-center pb-4 pt-4">
                {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}" class="btn_mange_pagging"><i class="fa fa-long-arrow-left"></i>&nbsp;&nbsp; Previous</a>
                {% else %}
                    <a href="#" class="btn_mange_pagging"><i class="fa fa-long-arrow-left"></i>&nbsp;&nbsp; Previous</a>
                {%endif%}

                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <a href="#" class="btn_pagging active">{{ num }}</a>
                    {% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 %}
                        <a href="?page={{ num }}" class="btn_pagging active">{{ num }}</a>
                    {% endif %}
                {% endfor %}


                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}" class="btn_mange_pagging">Next <i class="fa fa-long-arrow-right"></i>&nbsp;&nbsp; </a>
                {% else %}
                    <a href="#" class="btn_mange_pagging">Next <i class="fa fa-long-arrow-right"></i>&nbsp;&nbsp; </a>
                {%endif%}
             </div>
        </div>
        {% endif %}
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <!-- End: Blog Section -->

{% endblock %}