{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Start: Book & Media Section -->
<div id="content" class="site-content">
            <div id="primary" class="content-area">
                <main id="main" class="site-main">
                    <div class="books-media-list">
                        <div class="container">
                            <div class="row">
                                <!-- Start: Search Section -->
                                <section class="search-filters">
                                    <div class="container">
                                        <div class="filter-box">
                                            <h3>What are you looking for at the library?</h3>
                                            <form action="http://libraria.demo.presstigers.com/index.html" method="get">
                                                <div class="col-md-4 col-sm-6">
                                                    <div class="form-group">
                                                        <label class="sr-only" for="keywords">Search by Keyword</label>
                                                        <input class="form-control" placeholder="Search by Keyword" id="keywords" name="keywords" type="text">
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-6">
                                                    <div class="form-group">
                                                        <select name="catalog" id="catalog" class="form-control">
                                                            <option>Search the Catalog</option>
                                                            <option>Catalog 01</option>
                                                            <option>Catalog 02</option>
                                                            <option>Catalog 03</option>
                                                            <option>Catalog 04</option>
                                                            <option>Catalog 05</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-sm-6">
                                                    <div class="form-group">
                                                        <select name="category" id="category" class="form-control">
                                                            <option>All Categories</option>
                                                            <option>Category 01</option>
                                                            <option>Category 02</option>
                                                            <option>Category 03</option>
                                                            <option>Category 04</option>
                                                            <option>Category 05</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-2 col-sm-6">
                                                    <div class="form-group">
                                                        <input class="form-control" type="submit" value="Search">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </section>
                                <!-- End: Search Section -->
                            </div>
                            <div class="row">
                                <div class="col-md-9 col-md-push-3">
                                    <div class="filter-options margin-list">
                                        <div class="row">
                                            <div class="col-md-4 col-sm-4">
                                                <form method="get" action="{% url 'book_list' %}">
                                                    <select name="order_by" onchange="this.form.submit()">
                                                        <option selected="selected" value="">Default sorting</option>
                                                        <option value="popularity" {% if request.GET.order_by == 'popularity' %}selected{% endif %}>Sort by popularity</option>
                                                        <option value="rate" {% if request.GET.order_by == 'rate' %}selected{% endif %}>Sort by rating</option>
                                                        <option value="newest" {% if request.GET.order_by == 'newest' %}selected{% endif %}>Sort by newness</option>
                                                        <option value="price" {% if request.GET.order_by == 'price' %}selected{% endif %}>Sort by price</option>
                                                    </select>
                                                </form>
                                            </div>
                                            <div class="col-md-3 col-sm-3 pull-right">
                                                <div class="filter-toggle">
                                                    <a href="books-media-gird-view-v1.html"><i class="glyphicon glyphicon-th-large"></i></a>
                                                    <a href="books-media-list-view.html" class="active"><i class="glyphicon glyphicon-th-list"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {% for book in books %}
                                        <div class="books-list">
                                            <article>
                                                <div class="single-book-box">
                                                    <div class="post-thumbnail">
                                                        <div class="book-list-icon yellow-icon"></div>
                                                        <a href="#"><img alt="Book" src="{{ book.image.url }}" /></a>                                                                 </div>
                                                    <div class="post-detail">
                                                        <div class="books-social-sharing">
                                                            <ul>
                                                                <li><a href="#" target="_blank"><i class="fa fa-facebook"></i></a></li>
                                                                <li><a href="#" target="_blank"><i class="fa fa-twitter"></i></a></li>
                                                                <li><a href="#" target="_blank"><i class="fa fa-google-plus"></i></a></li>
                                                                <li><a href="#" target="_blank"><i class="fa fa-rss"></i></a></li>
                                                                <li><a href="#" target="_blank"><i class="fa fa-linkedin"></i></a></li>
                                                            </ul>
                                                        </div>
                                                        <div class="optional-links">
                                                            <ul>
                                                                <li>
                                                                    <a href="{% url 'cart_action' action='add' cart_item_id=book.id %}" target="_blank" data-toggle="blog-tags" data-placement="top" title="Add TO CART">
                                                                        <i class="fa fa-shopping-cart"></i>
                                                                    </a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" target="_blank" data-toggle="blog-tags" data-placement="top" title="Like">
                                                                        <i class="fa fa-heart"></i>
                                                                    </a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" target="_blank" data-toggle="blog-tags" data-placement="top" title="Mail"><i class="fa fa-envelope"></i>
                                                                    </a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" target="_blank" data-toggle="blog-tags" data-placement="top" title="Search">
                                                                        <i class="fa fa-search"></i>
                                                                    </a>
                                                                </li>
                                                                <li>
                                                                    <a href="#" target="_blank" data-toggle="blog-tags" data-placement="top" title="Share">
                                                                        <i class="fa fa-print"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <header class="entry-header">
                                                            <div class="row">
                                                                <div class="col-sm-6">
                                                                    <h3 class="entry-title">
                                                                        <a href="{% url 'book_detail' book.id %}">{{ book.title }}</a>
                                                                    </h3>
                                                                    <ul>
                                                                        <li><strong>Author:</strong>{{ book.author }}</li>
                                                                        <li><strong>ISBN:</strong>{{ book.isbn }}</li>
                                                                    </ul>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <ul>
                                                                        <li><strong>Edition:</strong>{{ book.edition }}</li>
                                                                        <li><strong>Local Availability:</strong>{{ book.is_active }}</li>
                                                                        <li>
                                                                            <div class="rating">
                                                                                {% with full_stars=book.rate|floatformat:"0"|add:"0" %}
                                                                                    {% for i in "12345" %}
                                                                                        {% if forloop.counter <= full_stars %}
                                                                                            <span>★</span>
                                                                                        {% else %}
                                                                                            <span>☆</span>
                                                                                        {% endif %}
                                                                                    {% endfor %}
                                                                                {% endwith %}
                                                                            </div>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </header>
                                                        <div class="entry-content">
                                                            <p>{{ book.description }}</p>
                                                        </div>
                                                        <footer class="entry-footer">
                                                            <a class="btn btn-dark-gray" href="{% url 'book_detail' book.id %}">Read More</a>
                                                        </footer>
                                                    </div>
                                                    <div class="clear"></div>
                                                </div>
                                            </article>
                                        </div>
                                    {% endfor %}

                                    {% if is_paginated %}
                                    <nav class="navigation pagination text-center">
                                        <h2 class="screen-reader-text">Posts navigation</h2>
                                        <div class="nav-links">
                                            {% if page_obj.has_previous %}
                                                <a class="prev page-numbers" href="?page={{ page_obj.previous_page_number }}"><i class="fa fa-long-arrow-left"></i> Previous</a>
                                            {% endif %}

                                            {% for num in page_obj.paginator.page_range %}
                                                {% if page_obj.number == num %}
                                                    <a href="#" class="btn_pagging active">{{ num }}</a>
                                                {% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 %}
                                                    <a href="?page={{ num }}" class="btn_pagging active">{{ num }}</a>
                                                {% endif %}
                                            {% endfor %}

                                            {% if page_obj.has_next %}
                                                <a class="next page-numbers" href="?page={{ page_obj.next_page_number }}">Next <i class="fa fa-long-arrow-right"></i></a>
                                            {% endif %}
                                        </div>
                                    </nav>
                                    {% endif %}

                                </div>
                                <div class="col-md-3 col-md-pull-9">
                                    <aside id="secondary" class="sidebar widget-area" data-accordion-group>
                                        <div class="widget widget_related_search open" data-accordion>
                                            <h4 class="widget-title" data-control>Related Searches</h4>
                                            <div data-content>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>Genres</h5>
                                                    <div class="widget_categories" data-content>
                                                        <ul>
                                                            {% for genre in genres %}
                                                                <li><a href="#">{{ genre.name }}<span>({{ genre.book_genre.count }})</span></a></li>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                </div>
                                                <br>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>Authors</h5>
                                                    <div class="widget_categories" data-content>
                                                        <ul>
                                                            {% for author in authors %}
                                                                <li><a href="#">{{ author }}</a></li>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <br>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>Tags</h5>
                                                    <div class="widget_categories" data-content>
                                                        <ul>
                                                            {% for tag in tags %}
                                                                <li><a href="#">{{ tag.name }}</a></li>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="widget widget_narrow_search" data-accordion>
                                            <h4 class="widget-title" data-control>Narrow your search</h4>
                                            <div data-content>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>By Price</h5>
                                                    <div class="widget_material" data-content>
                                                        <ul>
                                                            {% for book in book_price %}
                                                                <li><a href="{% url 'book_detail' book.pk %}">{{ book.title }}<span> - {{ book.price }}$</span></a></li>
                                                                <br>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>By Publishing Date </h5>
                                                    <div class="widget widget_material" data-content>
                                                        <ul>
                                                            {% for book in new_releases|slice:":4" %}
                                                                <li><a href="{% url 'book_detail' book.pk %}">{{ book.title }}<span> - {{ book.created_at }}</span></a></li>
                                                                <br>
                                                            {% endfor %}
                                                        </ul>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>By Popularity </h5>
                                                    <div class="widget widget_material" data-content>
                                                        <ul>
                                                            {% for book in popular %}
                                                                <li><a href="{% url 'book_detail' book.pk %}">{{ book.title }}<span> - {{ book.rate }}</span></a></li>
                                                                <br>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div data-accordion>
                                                    <h5 class="widget-sub-title" data-control>By Languages </h5>
                                                    <div class="widget widget_material" data-content>
                                                        <ul>
                                                            {% for lan in book_language|slice:":3" %}
                                                                <li><a href="#">{{ lan }}</a></li>
                                                                <br>
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="widget widget_recent_releases">
                                            <h4 class="widget-title">New Releases</h4>
                                            <ul>
                                                {% for book in new_releases %}
                                                    <li><a href="{% url 'book_detail' book.pk %}">{{ book.title }}</a></li>
                                                {% endfor %}
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="widget widget_recent_entries">
                                            <h4 class="widget-title">On-Order Items</h4>
                                            <ul>
                                                {% for book in on_order|slice:":3" %}
                                                    <li>
                                                        <figure>
                                                            <img src="{{ book.image.url }}" alt="product" />
                                                        </figure>
                                                        <a href="{% url 'book_detail' book.pk %}">{{ book.title }}</a>
                                                        <span class="price"><strong>Author:</strong>{{ book.author }}</span>
                                                        <span><strong>ISBN:</strong>{{ book.isbn }}</span>
                                                        <div class="rating">
                                                            {% with full_stars=book.rate|floatformat:"0"|add:"0" %}
                                                                {% for i in "12345" %}
                                                                    {% if forloop.counter <= full_stars %}
                                                                        <span>★</span>
                                                                    {% else %}
                                                                        <span>☆</span>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% endwith %}
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                    </aside>
                                </div>
                            </div>
                        </div>

                        <!-- Start: Staff Picks -->
                        <section class="team staff-picks">
                            <div class="container">
                                <div class="center-content">
                                    <h2 class="section-title">Staff Picks</h2>
                                    <span class="underline center"></span>
                                    <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                </div>
                                {% for book in books %}
                                <div class="team-list">
                                    <div class="team-member">
                                        <figure>
                                            <img src="{{ book.image.url }}" alt="Staff Pick" />
                                        </figure>
                                        <div class="content-block">
                                            <div class="member-info">
                                                <div class="member-thumb">
                                                    <img src="images/books-media/staff-pick/gail.jpg" alt="Katherine">
                                                </div>
                                                <div class="member-content">
                                                    <span class="designation">Downtown & Business</span>
                                                    <h4>{{ book.title }}</h4>
                                                    <ul class="social">
                                                        <li>
                                                            <a href="#" target="_blank">
                                                                <i class="fa fa-linkedin"></i>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" target="_blank">
                                                                <i class="fa fa-facebook-f"></i>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" target="_blank">
                                                                <i class="fa fa-twitter"></i>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" target="_blank">
                                                                <i class="fa fa-skype"></i>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <p>The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here...</p>
                                                <a class="btn btn-primary" href="{% url 'book_detail' book.id %}">Read More</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </section>
                        <!-- End: Staff Picks -->
                    </div>
                </main>
            </div>
        </div>
<!-- End: Books & Media Section -->

{% endblock %}